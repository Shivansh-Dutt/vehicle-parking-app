{% extends 'base.html' %}
{% block content %}
{% include 'admin/nav.html' %}
<div class="container mt-4">
    <h2 class="mb-4">Admin Dashboard</h2>
    <a href="{{url_for('create_parking_lot')}}" class="btn btn-primary mb-3">Create New Parking Lot</a>
    {%if lots%}
    <table class="table table-bordered">
        <thead>
            <tr>
                <th>Name</th>
                <th>Price/hr</th>
                <th>Address</th>
                <th>Pincode</th>
                <th>Spots</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for lot in lots %}
            <tr>
                <td>{{ lot.prime_location_name }}</td>
                <td>{{ lot.price_per_hour }}</td>
                <td>{{ lot.address }}</td>
                <td>{{ lot.pincode }}</td>
                <td>Available : {{available_spots[lot.id]}} / {{ lot.max_spots }}</td>
                <td>
                    <a href="{{ url_for('view_parking_lot', lot_id=lot.id) }}" class="btn btn-sm btn-info">View</a>
                    <a href="{{ url_for('edit_parking_lot', lot_id=lot.id) }}" class="btn btn-sm btn-warning">Edit</a>
                    <form method="POST" action="{{ url_for('delete_parking_lot', lot_id=lot.id) }}"
                        style="display:inline">
                        <button type="submit" class="btn btn-sm btn-danger">Delete</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {%else%}
    <p>No lots Available</p>
    {%endif%}
    <a href="{{url_for('view_users')}}" class="btn btn-secondary">View All Users</a>
</div>
{% endblock %}