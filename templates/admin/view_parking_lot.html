{% extends 'base.html' %}
{% block content %}
<div class="container mt-4">
    <h3>{{ lot.prime_location_name }} - Parking Spots</h3>
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Spot No</th>
                <th>Status</th>
                <th>Details</th>
            </tr>
        </thead>
        <tbody>
            {% for spot in spots %}
            <tr>
                <td>{{ spot.spot_number }}</td>
                <td>{{ 'Available' if spot.status == 'A' else 'Occupied' }}</td>
                <td><a href="{{ url_for('view_spot', spot_id=spot.id) }}" class="btn btn-sm btn-outline-info">View</a></td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <!-- Pagination Controls -->
    <nav aria-label="Page navigation">
      <ul class="pagination">
        {% if pagination.has_prev %}
          <li class="page-item">
            <a class="page-link" href="{{ url_for('view_parking_lot', lot_id=lot.id, page=pagination.prev_num) }}" aria-label="Previous">
              <span aria-hidden="true">&laquo;</span>
            </a>
          </li>
        {% else %}
          <li class="page-item disabled">
            <span class="page-link">&laquo;</span>
          </li>
        {% endif %}

        {% for page_num in pagination.iter_pages(left_edge=2, right_edge=2, left_current=2, right_current=2) %}
          {% if page_num %}
            {% if page_num == pagination.page %}
              <li class="page-item active"><span class="page-link">{{ page_num }}</span></li>
            {% else %}
              <li class="page-item"><a class="page-link" href="{{ url_for('view_parking_lot', lot_id=lot.id, page=page_num) }}">{{ page_num }}</a></li>
            {% endif %}
          {% else %}
            <li class="page-item disabled"><span class="page-link">â€¦</span></li>
          {% endif %}
        {% endfor %}

        {% if pagination.has_next %}
          <li class="page-item">
            <a class="page-link" href="{{ url_for('view_parking_lot', lot_id=lot.id, page=pagination.next_num) }}" aria-label="Next">
              <span aria-hidden="true">&raquo;</span>
            </a>
          </li>
        {% else %}
          <li class="page-item disabled">
            <span class="page-link">&raquo;</span>
          </li>
        {% endif %}
      </ul>
    </nav>

    <a href="/admin" class="btn btn-secondary">Back to Dashboard</a>
</div>
{% endblock %}
